#ifndef __mogedClipView__
#define __mogedClipView__

/**
@file
Subclass of ClipView, which is generated by wxFormBuilder.
*/

#include <vector>
#include "MogedFrames.h"
#include "mogedevents.hh"
#include "clipdb.hh"

class AppContext;

/** Implementing ClipView */
class mogedClipView : public ClipView, public Events::EventHandler
{
	AppContext* m_ctx;
	sqlite3_int64 m_current_clip;

	std::vector< ClipInfoBrief > m_infos;
	std::vector< Annotation > m_annotations;
public:
	/** Constructor */
	mogedClipView( wxWindow* parent , AppContext* ctx );
	~mogedClipView( ) ;

	void HandleEvent( Events::Event* ev);
	
protected:
	void OnDelete( wxCommandEvent& event) ;
	void OnActivateClip( wxListEvent& event) ;
	void OnRenameClip( wxListEvent& event );
	void OnClearSelection( wxCommandEvent& event );
	void OnRightClick( wxMouseEvent& event ) ;
	void OnApplyAnnotation( wxCommandEvent& evt) ;
	void OnRemoveAnnotation( wxCommandEvent& evt);

private:
	void SimpleRefreshView(); // only update from an updated m_infos
	void RefreshView(); // update from DB

	void GenerateNameList( const std::vector<int>& indices , wxString& result);
};

#endif // __mogedClipView__
